/* 
 * MODERNIST DESIGN SYSTEM - Tailwind v4 CSS-First
 * Clean, minimal, functional - inspired by Bauhaus & Swiss typography
 * Designed for PHP/Vue hybrid compatibility
 */

@config "../../../tailwind.config.js";

@import "tailwindcss";

/* Define layer order for cascade control */
@layer base, components, utilities;

/* ============================================
   BASE CONSTRAINTS - Minimum viewport
   ============================================ */
@layer base {
  html {
    min-width: 320px;
  }
  
  body {
    min-width: 320px;
  }
}

/* ============================================
   DESIGN TOKENS - Three-tier architecture
   ============================================ */

@theme {
  /* =========================
     1. PRIMITIVE TOKENS - Raw values
     ========================= */
  
  /* Grayscale Palette - OKLCH for better perceptual uniformity */
  --color-gray-0:   oklch(1.000 0.000 0);      /* Pure white */
  --color-gray-50:  oklch(0.985 0.002 247);    
  --color-gray-100: oklch(0.973 0.003 247);    
  --color-gray-200: oklch(0.935 0.006 247);    
  --color-gray-300: oklch(0.869 0.010 247);    
  --color-gray-400: oklch(0.707 0.015 247);    
  --color-gray-500: oklch(0.539 0.018 247);    
  --color-gray-600: oklch(0.428 0.020 247);    
  --color-gray-700: oklch(0.321 0.020 247);    
  --color-gray-800: oklch(0.215 0.019 247);    
  --color-gray-900: oklch(0.141 0.015 247);    
  --color-gray-950: oklch(0.075 0.010 247);    /* Near black */
  
  /* Primary Palette - Blue for trust & professionalism */
  --color-blue-50:  oklch(0.96 0.025 240);  /* Very light blue - increased chroma */
  --color-blue-100: oklch(0.92 0.045 240);  /* Light blue - more visible */
  --color-blue-200: oklch(0.86 0.075 240);  /* Soft blue */
  --color-blue-300: oklch(0.78 0.115 240);  /* Sky blue */
  --color-blue-400: oklch(0.68 0.165 240);  /* Medium blue */
  --color-blue-500: oklch(0.58 0.215 240);  /* Primary blue */
  --color-blue-600: oklch(0.50 0.220 240);  /* Strong blue */
  --color-blue-700: oklch(0.42 0.200 240);  /* Deep blue */
  --color-blue-800: oklch(0.35 0.175 240);  /* Dark blue */
  --color-blue-900: oklch(0.30 0.150 240);  /* Very dark blue - increased lightness */
  
  /* Accent Colors - Semantic use */
  --color-green-50:  oklch(0.971 0.018 142);
  --color-green-500: oklch(0.647 0.190 142);
  --color-green-600: oklch(0.519 0.195 142);
  
  --color-red-50:   oklch(0.971 0.018 27);
  --color-red-500:  oklch(0.637 0.237 27);
  --color-red-600:  oklch(0.577 0.237 27);
  
  --color-amber-50:  oklch(0.987 0.021 91);
  --color-amber-500: oklch(0.769 0.183 84);
  --color-amber-600: oklch(0.659 0.181 75);
  
  /* Typography Scale - Modular (1.2 ratio) - Now Fluid */
  /* Preserves exact 1.2 ratio while scaling smoothly */
  --font-size-xs:   clamp(0.625rem, 0.6rem + 0.125vw, 0.694rem);     /* 10-11px */
  --font-size-sm:   clamp(0.75rem, 0.72rem + 0.14vw, 0.833rem);      /* 12-13px */
  --font-size-base: clamp(0.875rem, 0.825rem + 0.25vw, 1rem);        /* 14-16px */
  --font-size-lg:   clamp(1.05rem, 0.99rem + 0.3vw, 1.2rem);         /* 17-19px */
  --font-size-xl:   clamp(1.26rem, 1.188rem + 0.36vw, 1.44rem);      /* 20-23px */
  --font-size-2xl:  clamp(1.512rem, 1.425rem + 0.435vw, 1.728rem);   /* 24-28px */
  --font-size-3xl:  clamp(1.814rem, 1.71rem + 0.52vw, 2.074rem);     /* 29-33px */
  --font-size-4xl:  clamp(2.177rem, 2.052rem + 0.625vw, 2.488rem);   /* 35-40px */
  --font-size-5xl:  clamp(2.612rem, 2.462rem + 0.75vw, 2.986rem);    /* 42-48px */
  
  /* Hero-specific fluid typography */
  --font-size-hero: clamp(2.5rem, 2rem + 2.5vw, 4.5rem);             /* 40-72px */
  
  /* Spacing - 4px base grid for precision */
  --spacing-0: 0;
  --spacing-px: 1px;
  --spacing-0_5: 0.125rem;  /* 2px */
  --spacing-1: 0.25rem;     /* 4px */
  --spacing-2: 0.5rem;      /* 8px */
  --spacing-3: 0.75rem;     /* 12px */
  --spacing-4: 1rem;        /* 16px */
  --spacing-5: 1.25rem;     /* 20px */
  --spacing-6: 1.5rem;      /* 24px */
  --spacing-8: 2rem;        /* 32px */
  --spacing-10: 2.5rem;     /* 40px */
  --spacing-12: 3rem;       /* 48px */
  --spacing-16: 4rem;       /* 64px */
  --spacing-20: 5rem;       /* 80px */
  --spacing-24: 6rem;       /* 96px */
  
  /* Line Heights - Fluid for better rhythm */
  --line-height-none: 1;
  --line-height-tight: clamp(1.2, 1.15 + 0.25vw, 1.25);
  --line-height-snug: clamp(1.325, 1.3 + 0.125vw, 1.375);
  --line-height-normal: clamp(1.45, 1.4 + 0.25vw, 1.5);
  --line-height-relaxed: clamp(1.575, 1.55 + 0.125vw, 1.625);
  --line-height-loose: clamp(1.7, 1.675 + 0.125vw, 1.75);
  
  /* Context-specific line heights */
  --line-height-body: var(--line-height-normal);
  --line-height-heading: var(--line-height-tight);
  
  /* Vertical Rhythm System */
  --rhythm-base: 1.5rem; /* 24px - matches 16px Ã— 1.5 line-height */
  --rhythm-half: 0.75rem; /* 12px */
  --rhythm-double: 3rem; /* 48px */
  --rhythm-triple: 4.5rem; /* 72px */
  
  /* Fluid Spacing System - Preserves rhythm while scaling */
  --spacing-fluid-xs: clamp(0.125rem, 0.1rem + 0.125vw, 0.25rem);
  --spacing-fluid-sm: clamp(0.25rem, 0.225rem + 0.125vw, 0.375rem);
  --spacing-fluid-md: clamp(0.5rem, 0.45rem + 0.25vw, 0.75rem);
  --spacing-fluid-base: clamp(1rem, 0.9rem + 0.5vw, 1.25rem);
  --spacing-fluid-lg: clamp(1.5rem, 1.35rem + 0.75vw, 2rem);
  --spacing-fluid-xl: clamp(2rem, 1.75rem + 1.25vw, 3rem);
  --spacing-fluid-2xl: clamp(3rem, 2.5rem + 2.5vw, 4.5rem);
  
  /* Fluid Rhythm - maintains 24px base rhythm while scaling */
  --rhythm-fluid: clamp(1.25rem, 1.125rem + 0.625vw, 1.5rem);
  --rhythm-fluid-half: calc(var(--rhythm-fluid) / 2);
  --rhythm-fluid-double: calc(var(--rhythm-fluid) * 2);
  --rhythm-fluid-triple: calc(var(--rhythm-fluid) * 3);
  
  /* Fluid Section Padding */
  --section-padding-y: clamp(2rem, 1.5rem + 2.5vw, 4rem);
  --section-padding-x: clamp(1rem, 0.75rem + 1.25vw, 1.5rem);
  --container-padding-fluid: clamp(1rem, 0.5rem + 2.5vw, 2rem);
  
  /* Semantic Rhythm Tokens */
  --margin-after-heading: var(--rhythm-base);
  --margin-after-paragraph: var(--rhythm-base);
  --margin-between-sections: var(--rhythm-double);
  --gap-grid-products: var(--rhythm-base);
  --gap-grid-blog: var(--spacing-8);
  --gap-component-internal: var(--spacing-4);
  
  /* Font Weights */
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  
  /* Border Radius - Subtle curves for modernist aesthetic */
  --radius-none: 0;
  --radius-sm: 0.125rem;   /* 2px - very subtle */
  --radius-md: 0.25rem;    /* 4px - default */
  --radius-lg: 0.375rem;   /* 6px - cards */
  --radius-xl: 0.5rem;     /* 8px - modals */
  --radius-2xl: 0.75rem;   /* 12px - large cards */
  --radius-3xl: 1rem;      /* 16px - special */
  --radius-full: 9999px;   /* pills/circles */
  
  /* Shadows - Subtle depth */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  --shadow-none: none;
  
  /* =========================
     2. SEMANTIC TOKENS - Context-aware
     ========================= */
  
  /* Background & Surface */
  --color-background: var(--color-gray-0);
  --color-surface: var(--color-gray-50);
  --color-surface-hover: var(--color-gray-100);
  --color-surface-active: var(--color-gray-200);
  
  /* Text Hierarchy */
  --color-text-primary: var(--color-gray-900);
  --color-text-secondary: var(--color-gray-600);
  --color-text-muted: var(--color-gray-500);
  --color-text-inverse: var(--color-gray-0);
  
  /* Brand Colors */
  --color-primary: var(--color-blue-600);
  --color-primary-hover: var(--color-blue-700);
  --color-primary-active: var(--color-blue-800);
  --color-primary-light: var(--color-blue-50);
  
  /* Semantic States */
  --color-success: var(--color-green-600);
  --color-success-light: var(--color-green-50);
  --color-danger: var(--color-red-600);
  --color-danger-light: var(--color-red-50);
  --color-warning: var(--color-amber-600);
  --color-warning-light: var(--color-amber-50);
  
  /* Borders */
  --color-border: var(--color-gray-200);
  --color-border-hover: var(--color-gray-300);
  --color-border-focus: var(--color-blue-500);
  
  /* =========================
     3. COMPONENT TOKENS - Specific use
     ========================= */
  
  /* Button Components */
  --button-radius: var(--radius-md);
  --button-font-weight: var(--font-weight-medium);
  --button-transition: 150ms;
  
  /* Card Components */
  --card-radius: var(--radius-lg);
  --card-padding: var(--spacing-4);
  --card-shadow: var(--shadow);
  
  /* Input Components */
  --input-radius: var(--radius-md);
  --input-padding-x: var(--spacing-3);
  --input-padding-y: var(--spacing-2);
  --input-border-width: 1px;
  
  /* Navigation */
  --nav-height: 4rem;
  --nav-padding: var(--spacing-4);
  
  /* Layout */
  --container-max: 1280px;
  --sidebar-width: 280px;
  --content-max: 65ch;
}

/* ============================================
   CONTAINER QUERY UTILITIES
   ============================================ */

@layer utilities {
  /* Container query utilities for component responsiveness */
  .container-aware {
    container-type: inline-size;
  }

  .container-aware-size {
    container-type: size;
  }

  .container-aware-inline {
    container-type: inline-size;
  }

  /* Named containers for specific contexts */
  .container-product {
    container-type: inline-size;
    container-name: product;
  }

  .container-blog {
    container-type: inline-size;
    container-name: blog;
  }

  .container-section {
    container-type: inline-size;
    container-name: section;
  }
  
  /* Intrinsic grid utilities */
  .grid-auto-xs {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 200px), 1fr));
    gap: var(--gap-grid-products);
  }
  
  .grid-auto-sm {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 250px), 1fr));
    gap: var(--gap-grid-products);
  }
  
  .grid-auto-md {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 300px), 1fr));
    gap: var(--gap-grid-products);
  }
  
  .grid-auto-lg {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 350px), 1fr));
    gap: var(--gap-grid-products);
  }
  
  .grid-auto-xl {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 400px), 1fr));
    gap: var(--gap-grid-products);
  }
  
  /* Blog-specific intrinsic grid */
  .blog-grid {
    display: grid;
    grid-template-columns: repeat(
      auto-fill,
      minmax(min(100%, 320px), 1fr)
    );
    gap: var(--gap-grid-blog);
  }
}

/* ============================================
   PERFORMANCE OPTIMIZATIONS
   ============================================ */

@layer utilities {
  /* CSS Containment for performance */
  .contain-layout {
    contain: layout;
  }
  
  .contain-style {
    contain: style;
  }
  
  .contain-paint {
    contain: paint;
  }
  
  .contain-strict {
    contain: layout style paint;
  }
  
  /* Common component containment */
  .product-card,
  .blog-card,
  .category-card {
    contain: layout style paint;
  }
  
  .sidebar {
    contain: layout;
  }
  
  /* Content visibility for long lists */
  .product-list-item,
  .blog-list-item {
    content-visibility: auto;
    contain-intrinsic-size: 0 300px;
  }
  
  /* Will-change for animations */
  .will-change-transform {
    will-change: transform;
  }
  
  .will-change-opacity {
    will-change: opacity;
  }
  
  .will-change-auto {
    will-change: auto;
  }
  
  /* Hardware acceleration */
  .hardware-accelerate {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  .smooth-scroll {
    -webkit-overflow-scrolling: touch;
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Prevent layout shifts with aspect ratios */
.aspect-square {
  aspect-ratio: 1;
}

.aspect-video {
  aspect-ratio: 16 / 9;
}

.aspect-product {
  aspect-ratio: 4 / 5;
}

.aspect-landscape {
  aspect-ratio: 4 / 3;
}

.aspect-portrait {
  aspect-ratio: 3 / 4;
}

/* ============================================
   CSS CUSTOM PROPERTIES - For runtime access
   ============================================ */

:root {
  /* Grayscale Palette */
  --color-gray-0:   oklch(1.000 0.000 0);
  --color-gray-50:  oklch(0.985 0.002 247);    
  --color-gray-100: oklch(0.973 0.003 247);    
  --color-gray-200: oklch(0.935 0.006 247);    
  --color-gray-300: oklch(0.869 0.010 247);    
  --color-gray-400: oklch(0.707 0.015 247);    
  --color-gray-500: oklch(0.539 0.018 247);    
  --color-gray-600: oklch(0.428 0.020 247);    
  --color-gray-700: oklch(0.321 0.020 247);    
  --color-gray-800: oklch(0.215 0.019 247);    
  --color-gray-900: oklch(0.141 0.015 247);    
  --color-gray-950: oklch(0.075 0.010 247);
  
  /* Blue Palette */
  --color-blue-50:  oklch(0.96 0.025 240);
  --color-blue-100: oklch(0.92 0.045 240);
  --color-blue-200: oklch(0.86 0.075 240);
  --color-blue-300: oklch(0.78 0.115 240);
  --color-blue-400: oklch(0.68 0.165 240);
  --color-blue-500: oklch(0.58 0.215 240);
  --color-blue-600: oklch(0.50 0.220 240);
  --color-blue-700: oklch(0.42 0.200 240);
  --color-blue-800: oklch(0.35 0.175 240);
  --color-blue-900: oklch(0.30 0.150 240);
  
  /* Green Palette */
  --color-green-50:  oklch(0.971 0.018 142);
  --color-green-500: oklch(0.647 0.190 142);
  --color-green-600: oklch(0.519 0.195 142);
  
  /* Red Palette */
  --color-red-50:   oklch(0.971 0.018 27);
  --color-red-500:  oklch(0.637 0.237 27);
  --color-red-600:  oklch(0.577 0.237 27);
  
  /* Amber Palette */
  --color-amber-50:  oklch(0.987 0.021 91);
  --color-amber-500: oklch(0.769 0.183 84);
  --color-amber-600: oklch(0.659 0.181 75);
}

/* Dark mode overrides */
.dark {
  --color-text-primary: var(--color-gray-100);
  --color-text-secondary: var(--color-gray-300);
  --color-text-muted: var(--color-gray-400);
  --color-text-inverse: var(--color-gray-900);
  
  --color-background: var(--color-gray-900);
  --color-surface: var(--color-gray-800);
  --color-surface-elevated: var(--color-gray-700);
  
  --color-border: var(--color-gray-700);
  --color-border-muted: var(--color-gray-800);
  
  /* Form inputs in dark mode */
  --color-input-bg: var(--color-gray-800);
  --color-input-border: var(--color-gray-600);
  --color-input-text: var(--color-gray-100);
  --color-input-placeholder: var(--color-gray-500);
}

/* ============================================
   BASE LAYER - Global defaults
   ============================================ */

@layer base {
  * {
    /* Modernist principle: no unnecessary decoration */
    @apply border-border;
  }
  
  body {
    @apply bg-background text-text-primary antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
  
  /* Typography defaults */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold text-text-primary;
    line-height: var(--line-height-tight);
  }
  
  p {
    line-height: var(--line-height-relaxed);
  }
  
  /* Focus states - accessibility first */
  :focus {
    outline: none;
  }
  
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }
  
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
}

/* ============================================
   UTILITIES LAYER - Helper classes
   ============================================ */

@layer utilities {
  /* Typography utilities */
  .text-balance {
    text-wrap: balance;
  }
  
  .text-pretty {
    text-wrap: pretty;
  }
  
  /* Container queries helper */
  .container-auto {
    container-type: inline-size;
  }
  
  /* Hide scrollbar but keep functionality */
  .scrollbar-none {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  
  .scrollbar-none::-webkit-scrollbar {
    display: none;
  }
  
  /* Aspect ratios for e-commerce */
  .aspect-product {
    aspect-ratio: 4/5;
  }
  
  .aspect-product-wide {
    aspect-ratio: 16/9;
  }
  
  /* Selection color */
  ::selection {
    @apply bg-primary/20 text-primary;
  }
}

/* ============================================
   THEME VARIANTS - Dark mode ready
   ============================================ */

[data-theme="dark"] {
  --color-background: var(--color-gray-950);
  --color-surface: var(--color-gray-900);
  --color-surface-hover: var(--color-gray-800);
  --color-surface-active: var(--color-gray-700);
  
  --color-text-primary: var(--color-gray-50);
  --color-text-secondary: var(--color-gray-400);
  --color-text-muted: var(--color-gray-500);
  
  --color-border: var(--color-gray-800);
  --color-border-hover: var(--color-gray-700);
}

/* Note: Component-specific styles should be in their own CSS files
   following the /ui/ and /views/ folder structure */