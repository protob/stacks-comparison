@theme {
  /* =========================
     1. PRIMITIVE TOKENS - Foundations
     ========================= */

  /* Breakpoints - Fluid scaling between breakpoints */
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1280px;
  --breakpoint-2xl: 1536px;

  /* Typography */
  --font-family-sans: "Inter", ui-sans-serif, system-ui, sans-serif;
  --font-size-base: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem); /* Scaled down from 14-16px to 12-14px */
  --font-size-sm: clamp(0.7rem, 0.65rem + 0.25vw, 0.8rem);
  --font-size-lg: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
  --font-size-xl: clamp(1.2rem, 1.1rem + 0.5vw, 1.35rem);
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  --line-height-tight: 1.25;
  --line-height-snug: 1.375;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;
  --line-height-loose: 2;

  /* Spacing - 4px base grid with fluid scaling, scaled down for smaller UI */
  --spacing-0: 0px;
  --spacing-px: 1px;
  --spacing-1: clamp(0.15rem, 0.13rem + 0.1vw, 0.25rem); /* 2.4-4px */
  --spacing-2: clamp(0.3rem, 0.26rem + 0.2vw, 0.5rem); /* 4.8-8px */
  --spacing-3: clamp(0.45rem, 0.39rem + 0.3vw, 0.75rem); /* 7.2-12px */
  --spacing-4: clamp(0.6rem, 0.52rem + 0.4vw, 1rem); /* 9.6-16px */
  --spacing-5: clamp(0.75rem, 0.65rem + 0.5vw, 1.25rem); /* 12-20px */
  --spacing-6: clamp(0.9rem, 0.78rem + 0.6vw, 1.5rem); /* 14.4-24px */
  --spacing-8: clamp(1.2rem, 1.04rem + 0.8vw, 2rem); /* 19.2-32px */
  --spacing-10: clamp(1.5rem, 1.3rem + 1vw, 2.5rem); /* 24-40px */
  --spacing-12: clamp(1.8rem, 1.56rem + 1.2vw, 3rem); /* 28.8-48px */

  /* Radius */
  --radius-sm: clamp(0.15rem, 0.13rem + 0.1vw, 0.25rem); /* Scaled down */
  --radius-md: clamp(0.3rem, 0.26rem + 0.2vw, 0.5rem);
  --radius-lg: clamp(0.45rem, 0.39rem + 0.3vw, 0.75rem);
  --radius-xl: clamp(0.6rem, 0.52rem + 0.4vw, 1rem);
  --radius-full: 9999px;

  /* Shadows */
  --shadow: 0 2px 4px oklch(0% 0 0 / 0.05), 0 1px 2px oklch(0% 0 0 / 0.1);
  --shadow-md: 0 4px 6px oklch(0% 0 0 / 0.05), 0 2px 4px oklch(0% 0 0 / 0.1);
  --shadow-lg: 0 10px 15px oklch(0% 0 0 / 0.1), 0 4px 6px oklch(0% 0 0 / 0.05);

  /* Transitions */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);

  /* =========================
     2. SEMANTIC TOKENS - Meaningful aliases
     ========================= */

  /* Surfaces */
  --color-background: var(--color-gray-0);
  --color-surface: var(--color-gray-50);
  --color-surface-hover: var(--color-gray-100);
  --color-surface-active: var(--color-gray-200);

  /* Text */
  --color-text-primary: var(--color-gray-950);
  --color-text-secondary: var(--color-gray-600);
  --color-text-muted: var(--color-gray-500);
  --color-text-inverse: var(--color-gray-0);

  /* Brand Colors */
  --color-primary: var(--color-blue-600);
  --color-primary-hover: var(--color-blue-700);
  --color-primary-active: var(--color-blue-800);
  --color-primary-light: var(--color-blue-50);

  /* Semantic States for Todo */
  --color-success: var(--color-green-600);
  --color-success-light: var(--color-green-50);
  --color-danger: var(--color-red-600);
  --color-danger-light: var(--color-red-50);
  --color-warning: var(--color-amber-600);
  --color-warning-light: var(--color-amber-50);

  /* Borders */
  --color-border: var(--color-gray-200);
  --color-border-hover: var(--color-gray-300);
  --color-border-focus: var(--color-blue-500);

  /* =========================
     3. COMPONENT TOKENS - Specific use for Todo app
     ========================= */

  /* Button Components */
  --button-radius: var(--radius-md);
  --button-font-weight: var(--font-weight-medium);
  --button-transition: 150ms;

  /* Card/Item Components */
  --card-radius: var(--radius-lg);
  --card-padding: var(--spacing-3); /* Reduced from spacing-4 for smaller padding */
  --card-shadow: var(--shadow);

  /* Input Components */
  --input-radius: var(--radius-md);
  --input-padding-x: var(--spacing-2); /* Reduced for smaller inputs */
  --input-padding-y: var(--spacing-1);
  --input-border-width: 1px;

  /* Navigation/Sidebar */
  --nav-height: clamp(2.5rem, 2rem + 2.5vw, 3.5rem); /* Scaled down */
  --nav-padding: var(--spacing-3); /* Reduced */

  /* Layout */
  --container-max: 1024px; /* Reduced from 1280px */
  --sidebar-width: clamp(180px, 12vw, 240px); /* Scaled down */
  --content-max: 55ch; /* Reduced */
}

/* ============================================
   CONTAINER QUERY UTILITIES - For component-based responsiveness
   ============================================ */

@layer utilities {
  /* Container query utilities */
  .container-aware {
    container-type: inline-size;
  }

  .container-item {
    container-type: inline-size;
    container-name: item;
  }

  .container-sidebar {
    container-type: inline-size;
    container-name: sidebar;
  }

  /* Intrinsic grid for Todo items */
  .grid-auto-items {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 200px), 1fr)); /* Reduced min width for smaller cards */
    gap: var(--spacing-3); /* Reduced gap */
  }

  /* Semantic utilities for easy use in components */
  .bg-background { background-color: var(--color-background); }
  .bg-surface { background-color: var(--color-surface); }
  .bg-surface-hover { background-color: var(--color-surface-hover); }
  .bg-surface-active { background-color: var(--color-surface-active); }
  .bg-primary { background-color: var(--color-primary); }
  .bg-primary-hover { background-color: var(--color-primary-hover); }
  .bg-primary-active { background-color: var(--color-primary-active); }
  .bg-success { background-color: var(--color-success); }
  .bg-danger { background-color: var(--color-danger); }
  .bg-warning { background-color: var(--color-warning); }
  .bg-success-light { background-color: var(--color-success-light); }
  .bg-danger-light { background-color: var(--color-danger-light); }
  .bg-warning-light { background-color: var(--color-warning-light); }

  .text-primary { color: var(--color-text-primary); }
  .text-secondary { color: var(--color-text-secondary); }
  .text-muted { color: var(--color-text-muted); }
  .text-inverse { color: var(--color-text-inverse); }

  .border-border { border-color: var(--color-border); }
  .border-border-hover { border-color: var(--color-border-hover); }
  .border-border-focus { border-color: var(--color-border-focus); }

  .rounded-card-radius { border-radius: var(--card-radius); }
  .p-card-padding { padding: var(--card-padding); }
  .shadow-card-shadow { box-shadow: var(--card-shadow); }
  .rounded-button-radius { border-radius: var(--button-radius); }
  .font-button-font-weight { font-weight: var(--button-font-weight); }
  .transition-button-transition { transition: var(--button-transition); }
  .rounded-input-radius { border-radius: var(--input-radius); }
  .p-nav-padding { padding: var(--nav-padding); }
  .h-nav-height { height: var(--nav-height); }
  .w-sidebar-width { width: var(--sidebar-width); }
}

/* ============================================
   PERFORMANCE OPTIMIZATIONS - Containment, visibility
   ============================================ */

@layer utilities {
  /* CSS Containment */
  .contain-strict {
    contain: layout style paint;
  }

  /* For Todo list items */
  .item-list {
    content-visibility: auto;
    contain-intrinsic-size: 0 250px; /* Reduced for smaller */
  }

  /* Hardware acceleration */
  .hardware-accelerate {
    transform: translateZ(0);
  }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

/* Aspect ratios for proportions */
.aspect-square {
  aspect-ratio: 1 / 1;
}

.aspect-todo {
  aspect-ratio: 16 / 9;
}

/* ============================================
   CSS CUSTOM PROPERTIES
   ============================================ */

:root {
  /* Export primitives as vars */
  --color-gray-0:   oklch(1.000 0.000 0);
  --color-gray-50:  oklch(0.985 0.002 247);
  --color-gray-100: oklch(0.973 0.003 247);
  --color-gray-200: oklch(0.935 0.006 247);
  --color-gray-300: oklch(0.869 0.010 247);
  --color-gray-400: oklch(0.707 0.015 247);
  --color-gray-500: oklch(0.539 0.018 247);
  --color-gray-600: oklch(0.428 0.020 247);
  --color-gray-700: oklch(0.321 0.020 247);
  --color-gray-800: oklch(0.215 0.019 247);
  --color-gray-900: oklch(0.141 0.015 247);
  --color-gray-950: oklch(0.075 0.010 247);

  /* Blue */
  --color-blue-50:  oklch(0.96 0.025 240);
  --color-blue-100: oklch(0.92 0.045 240);
  --color-blue-200: oklch(0.86 0.075 240);
  --color-blue-300: oklch(0.78 0.115 240);
  --color-blue-400: oklch(0.68 0.165 240);
  --color-blue-500: oklch(0.58 0.215 240);
  --color-blue-600: oklch(0.50 0.220 240);
  --color-blue-700: oklch(0.42 0.200 240);
  --color-blue-800: oklch(0.35 0.175 240);
  --color-blue-900: oklch(0.30 0.150 240);

  /* Green */
  --color-green-50:  oklch(0.96 0.025 150);
  --color-green-600: oklch(0.50 0.220 150);

  /* Red */
  --color-red-50:  oklch(0.96 0.025 0);
  --color-red-600: oklch(0.50 0.220 0);

  /* Amber */
  --color-amber-50:  oklch(0.96 0.025 60);
  --color-amber-600: oklch(0.50 0.220 60);
}

/* Dark mode overrides (class strategy) */
.dark {
  --color-background: var(--color-gray-950);
  --color-surface: var(--color-gray-900);
  --color-surface-hover: var(--color-gray-800);
  --color-surface-active: var(--color-gray-700);

  --color-text-primary: var(--color-gray-50);
  --color-text-secondary: var(--color-gray-400);
  --color-text-muted: var(--color-gray-500);
  --color-text-inverse: var(--color-gray-900);

  --color-border: var(--color-gray-800);
  --color-border-hover: var(--color-gray-700);

  --color-input-bg: var(--color-gray-800);
  --color-input-border: var(--color-gray-600);
  --color-input-text: var(--color-gray-100);
  --color-input-placeholder: var(--color-gray-500);
}

/* ============================================
   BASE LAYER - Global defaults
   ============================================ */

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-primary antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold text-primary;
    line-height: var(--line-height-tight);
  }

  p {
    line-height: var(--line-height-relaxed);
  }

  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }

  html {
    scroll-behavior: smooth;
  }
}

/* ============================================
   UTILITIES LAYER - Helper classes
   ============================================ */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .scrollbar-none::-webkit-scrollbar {
    display: none;
  }

  ::selection {
    @apply bg-primary/20 text-primary;
  }
}
